(this["webpackJsonpcandy-machine-mint"]=this["webpackJsonpcandy-machine-mint"]||[]).push([[0],{127:function(e,t,n){},155:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r,a=n(14),c=n(3),s=n(1),o=n.n(s),i=n(7),u=n(78);!function(e){e[e.Sequential=0]="Sequential",e[e.Parallel=1]="Parallel",e[e.StopOnFailure=2]="StopOnFailure"}(r||(r={}));var l=function(){var e=Object(c.a)(o.a.mark((function e(t,n,c,s){var l,f,b,d,m,g,h,j,x,v,O,w,k,y,T=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=T.length>4&&void 0!==T[4]?T[4]:r.Parallel,f=T.length>5&&void 0!==T[5]?T[5]:"singleGossip",b=T.length>6&&void 0!==T[6]?T[6]:function(e,t){},d=T.length>7&&void 0!==T[7]?T[7]:function(e,t){return!1},m=T.length>8?T[8]:void 0,n.publicKey){e.next=7;break}throw new u.e;case 7:if(g=[],m){e.next=12;break}return e.next=11,t.getRecentBlockhash(f);case 11:m=e.sent;case 12:h=function(e){var t=c[e],r=s[e];if(0===t.length)return"continue";var o=new i.Transaction;t.forEach((function(e){return o.add(e)})),o.recentBlockhash=m.blockhash,o.setSigners.apply(o,[n.publicKey].concat(Object(a.a)(r.map((function(e){return e.publicKey}))))),r.length>0&&o.partialSign.apply(o,Object(a.a)(r)),g.push(o)},j=0;case 14:if(!(j<c.length)){e.next=21;break}if("continue"!==h(j)){e.next=18;break}return e.abrupt("continue",18);case 18:j++,e.next=14;break;case 21:return e.next=23,n.signAllTransactions(g);case 23:x=e.sent,v=[],O={breakEarly:!1,i:0},console.log("Signed txns length",x.length,"vs handed in length",c.length),w=o.a.mark((function e(n){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=p({connection:t,signedTransaction:x[n]})).then((function(e){var t=e.txid;e.slot;b(t,n)})).catch((function(e){d(x[n],n),l===r.StopOnFailure&&(O.breakEarly=!0,O.i=n)})),l===r.Parallel){e.next=21;break}return e.prev=3,e.next=6,a;case 6:e.next=19;break;case 8:if(e.prev=8,e.t0=e.catch(3),console.log("Caught failure",e.t0),!O.breakEarly){e.next=19;break}return console.log("Died on ",O.i),e.t1=O.i,e.next=16,Promise.all(v);case 16:return e.t2=e.sent,e.t3={number:e.t1,txs:e.t2},e.abrupt("return",{v:e.t3});case 19:e.next=22;break;case 21:v.push(a);case 22:case"end":return e.stop()}}),e,null,[[3,8]])})),k=0;case 29:if(!(k<x.length)){e.next=37;break}return e.delegateYield(w(k),"t0",31);case 31:if("object"!==typeof(y=e.t0)){e.next=34;break}return e.abrupt("return",y.v);case 34:k++,e.next=29;break;case 37:if(l===r.Parallel){e.next=40;break}return e.next=40,Promise.all(v);case 40:return e.t1=x.length,e.next=43,Promise.all(v);case 43:return e.t2=e.sent,e.abrupt("return",{number:e.t1,txs:e.t2});case 45:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),f=function(){return(new Date).getTime()/1e3},b=15e3;function p(e){return d.apply(this,arguments)}function d(){return(d=Object(c.a)(o.a.mark((function e(t){var n,r,a,s,i,u,l,p,d,g,j,v,O;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.signedTransaction,r=t.connection,a=t.timeout,s=void 0===a?b:a,i=n.serialize(),u=f(),l=0,e.next=6,r.sendRawTransaction(i,{skipPreflight:!0});case 6:return p=e.sent,console.log("Started awaiting confirmation for",p),d=!1,Object(c.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d||!(f()-u<s)){e.next=6;break}return r.sendRawTransaction(i,{skipPreflight:!0}),e.next=4,x(500);case 4:e.next=0;break;case 6:case"end":return e.stop()}}),e)})))(),e.prev=10,e.next=13,h(p,s,r,"recent",!0);case 13:if(g=e.sent){e.next=16;break}throw new Error("Timed out awaiting confirmation on transaction");case 16:if(!g.err){e.next=19;break}throw console.error(g.err),new Error("Transaction failed: Custom instruction error");case 19:l=(null===g||void 0===g?void 0:g.slot)||0,e.next=47;break;case 22:if(e.prev=22,e.t0=e.catch(10),console.error("Timeout Error caught",e.t0),!e.t0.timeout){e.next=27;break}throw new Error("Timed out awaiting confirmation on transaction");case 27:return j=null,e.prev=28,e.next=31,m(r,n,"single");case 31:j=e.sent.value,e.next=36;break;case 34:e.prev=34,e.t1=e.catch(28);case 36:if(!j||!j.err){e.next=47;break}if(!j.logs){e.next=46;break}v=j.logs.length-1;case 39:if(!(v>=0)){e.next=46;break}if(!(O=j.logs[v]).startsWith("Program log: ")){e.next=43;break}throw new Error("Transaction failed: "+O.slice("Program log: ".length));case 43:--v,e.next=39;break;case 46:throw new Error(JSON.stringify(j.err));case 47:return e.prev=47,d=!0,e.finish(47);case 50:return console.log("Latency",p,f()-u),e.abrupt("return",{txid:p,slot:l});case 52:case"end":return e.stop()}}),e,null,[[10,22,47,50],[28,34]])})))).apply(this,arguments)}function m(e,t,n){return g.apply(this,arguments)}function g(){return(g=Object(c.a)(o.a.mark((function e(t,n,r){var a,c,s,i,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._recentBlockhash(t._disableBlockhashCaching);case 2:return n.recentBlockhash=e.sent,a=n.serializeMessage(),c=n._serialize(a),s=c.toString("base64"),i=[s,{encoding:"base64",commitment:r}],e.next=10,t._rpcRequest("simulateTransaction",i);case 10:if(!(u=e.sent).error){e.next=13;break}throw new Error("failed to simulate transaction: "+u.error.message);case 13:return e.abrupt("return",u.result);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e,t,n){return j.apply(this,arguments)}function j(){return j=Object(c.a)(o.a.mark((function e(t,n,r){var a,s,i,u,l,f=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=f.length>3&&void 0!==f[3]?f[3]:"recent",s=f.length>4&&void 0!==f[4]&&f[4],i=!1,u={slot:0,confirmations:0,err:null},l=0,e.next=7,new Promise(function(){var e=Object(c.a)(o.a.mark((function e(f,b){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout((function(){i||(i=!0,console.log("Rejecting for timeout..."),b({timeout:!0}))}),n);try{l=r.onSignature(t,(function(e,t){i=!0,u={err:e.err,slot:t.slot,confirmations:0},e.err?(console.log("Rejected via websocket",e.err),b(u)):(console.log("Resolved via websocket",e),f(u))}),a)}catch(p){i=!0,console.error("WS error in setup",t,p)}case 2:if(i||!s){e.next=8;break}return Object(c.a)(o.a.mark((function e(){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.getSignatureStatuses([t]);case 3:n=e.sent,u=n&&n.value[0],i||(u?u.err?(console.log("REST error for",t,u),i=!0,b(u.err)):u.confirmations?(console.log("REST confirmation for",t,u),i=!0,f(u)):console.log("REST no confirmations for",t,u):console.log("REST null result for",t,u)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),i||console.log("REST connection error: txid",t,e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))(),e.next=6,x(2e3);case 6:e.next=2;break;case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 7:return u=e.sent,r._signatureSubscriptions[l]&&r.removeSignatureListener(l),i=!0,console.log("Returning status",u),e.abrupt("return",u);case 12:case"end":return e.stop()}}),e)}))),j.apply(this,arguments)}function x(e){return new Promise((function(t){return setTimeout(t,e)}))}},156:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a}));n(3),n(1);var r=n(24),a=(n(88),n(7),new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}),new r.d.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"));new r.d.PublicKey("gatem74V238djXdzWnJf94Wo1DcnuGkfijbf3AuBhfs")}).call(this,n(11).Buffer)},176:function(e,t){},178:function(e,t){},201:function(e,t){},202:function(e,t){},228:function(e,t,n){},229:function(e,t,n){"use strict";n.r(t);var r,a,c=n(2),s=n.n(c),o=n(23),i=n.n(o),u=(n(127),n(24)),l=n(3),f=n(12),b=n(86),p=n(1),d=n.n(p),m=n(164),g=n(89),h=n(148),j=n(77),x=n(90),v=n.p+"static/media/twitter.9e527c8d.gif",O=n(15),w=(Object(g.a)(j.a)(r||(r=Object(b.a)(["\n  width: 100%;\n  height: 60px;\n  margin-top: 10px;\n  margin-bottom: 5px;\n  background: linear-gradient(180deg, #b38728 0%, #fbf5b7 100%);\n\n  color: white;\n  font-size: 16px;\n  font-weight: bold;\n"]))),g.a.div(a||(a=Object(b.a)([""]))),function(e){var t=Object(c.useState)(!1),n=Object(f.a)(t,2),r=(n[0],n[1]),a=Object(c.useState)(0),s=Object(f.a)(a,2),o=s[0],i=s[1],u=Object(c.useState)(),b=Object(f.a)(u,2),p=b[0],g=b[1],j=Object(c.useState)(""),w=Object(f.a)(j,2),k=(w[0],w[1],Object(c.useState)("")),y=Object(f.a)(k,2),T=(y[0],y[1],Object(c.useState)({open:!1,message:"",severity:void 0})),S=Object(f.a)(T,2),N=(S[0],S[1]),P=(e.rpcHost,Object(h.b)()),E=Object(c.useMemo)((function(){if(P&&P.publicKey&&P.signAllTransactions&&P.signTransaction)return{publicKey:P.publicKey,signAllTransactions:P.signAllTransactions,signTransaction:P.signTransaction}}),[P]),R=Object(c.useCallback)(Object(l.a)(d.a.mark((function t(){var n,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("I am here in refresh machine"),E){t.next=3;break}return t.abrupt("return");case 3:if(console.log("I am here in  code"),!e.programId){t.next=22;break}return t.prev=5,t.next=8,Object(x.c)(E,e.programId,e.connection);case 8:return n=t.sent,g(n),console.log("cndy is :"+n),t.next=13,Object(x.b)(n);case 13:r=t.sent,i(r),console.log("Total number of Tweets are :"+r),t.next=22;break;case 18:t.prev=18,t.t0=t.catch(5),console.log("There was a problem fetching Tweet program state"),console.log(t.t0);case 22:case"end":return t.stop()}}),t,null,[[5,18]])}))),[E,e.programId,e.connection]),C=function(){var t=Object(l.a)(d.a.mark((function t(){var n,a,c,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,console.log("I am in sendTweet function "+P.connected+" : "+(null===p||void 0===p?void 0:p.program)+" : "+P.publicKey),r(!0),null===(n=document.getElementById("#identity"))||void 0===n||n.click(),!(P.connected&&null!==p&&void 0!==p&&p.program&&P.publicKey)){t.next=15;break}return t.next=7,Object(x.d)(p,P.publicKey);case 7:if(a=t.sent[0],console.log("The tx id is :"+a),c={err:!0},!a){t.next=14;break}return t.next=13,Object(x.a)(a,e.txTimeout,e.connection,!0);case 13:c=t.sent;case 14:c&&!c.err?N({open:!0,message:"Congratulations! Mint succeeded!",severity:"success"}):N({open:!0,message:"Mint failed! Please try again!",severity:"error"});case 15:t.next=22;break;case 17:t.prev=17,t.t0=t.catch(0),s=t.t0.msg||"Minting failed! Please try again!",t.t0.msg?311===t.t0.code?(s="SOLD OUT!",window.location.reload()):312===t.t0.code&&(s="Minting period hasn't started yet."):t.t0.message?t.t0.message.indexOf("0x137")?s="SOLD OUT!":t.t0.message.indexOf("0x135")&&(s="Insufficient funds to mint. Please fund your wallet."):s="Transaction Timeout! Please try again.",N({open:!0,message:s,severity:"error"});case 22:return t.prev=22,r(!1),t.finish(22);case 25:case"end":return t.stop()}}),t,null,[[0,17,22,25]])})));return function(){return t.apply(this,arguments)}}();return Object(c.useEffect)((function(){R()}),[E,e.programId,e.connection,R]),Object(O.jsx)("div",{className:"mainHomeBlock",children:Object(O.jsxs)("div",{className:"experimental50",children:[Object(O.jsx)("div",{className:" mainComponentFrame",children:Object(O.jsx)("img",{alt:" ",className:"mainSolqueenGif",src:v})}),Object(O.jsx)("div",{className:"combinedIntroAndBuy",children:Object(O.jsxs)("div",{className:"introContent",children:[Object(O.jsx)("h1",{className:"celebrate gradText",children:"SolanaTwitter"}),Object(O.jsxs)("p",{children:[Object(O.jsxs)("b",{className:"celebrate",children:[Object(O.jsxs)("i",{children:[" ",Object(O.jsx)("h4",{className:"celebrate",children:" Let's roll the luck ! "})]})," "]}),Object(O.jsx)("br",{})]}),Object(O.jsx)(m.a,{onClick:C,children:"Send tweet"}),Object(O.jsxs)("h4",{className:"gradText",children:["Tweet Count is : ",o," "]})]})})]})})});function k(){var e=Object(c.useState)((new Date).getFullYear()),t=Object(f.a)(e,1)[0];return Object(O.jsx)("div",{className:"social-container",children:Object(O.jsx)("div",{className:"social-links",children:Object(O.jsxs)("div",{className:"pink-link copyrightContainer",children:["Copyright \xa9 ",t," SolanaTwitter"]})})})}var y,T=n(6),S=n(5),N=n(9),P=n(10),E=Object(g.a)(j.a)(y||(y=Object(b.a)([""]))),R=function(e){Object(N.a)(n,e);var t=Object(P.a)(n);function n(){return Object(T.a)(this,n),t.apply(this,arguments)}return Object(S.a)(n,[{key:"render",value:function(){return Object(O.jsxs)("nav",{className:"navBarItems",children:[Object(O.jsx)("div",{className:"navbarLogo",children:Object(O.jsx)("h2",{className:"gradTextFancyFont",children:"SolanaTwitter"})}),Object(O.jsxs)("ul",{className:"navMenu",children:[Object(O.jsx)("li",{className:"navLinks"}),Object(O.jsx)("li",{className:"navLinks"}),Object(O.jsx)("li",{className:"navLinks"}),Object(O.jsx)("li",{className:"navLinks"}),Object(O.jsx)("li",{className:"navLinks"}),Object(O.jsx)("li",{className:"navLinks"}),Object(O.jsx)("li",{className:"navLinks"}),Object(O.jsx)("li",{className:"navLinks"}),Object(O.jsx)("li",{className:"navLinks"}),Object(O.jsx)("li",{className:"navLinks"}),Object(O.jsx)("li",{className:"navLinks"}),Object(O.jsx)("li",{className:"navLinks",children:Object(O.jsx)(E,{className:"gradientClass",children:Object(O.jsx)("b",{children:"Connect Wallet"})})})]})]})}}]),n}(c.Component),C=R,L=n(7),I=n(264),K=n(265),B=n(266),D=n(259),F=n(260),A=n(267),M=n(263),W=n(162),J=n(261),z=Object(W.a)({palette:{type:"dark"}}),q=function(){try{var e=new u.d.PublicKey("BwwdesmeES3kJRxNJduM9rE6DfojzEC6DwQJveWqEW5s");return console.log("I am in getprogramID function : "+e),e}catch(t){return void console.log("Failed to construct PROGRAMID",t)}}(),G="devnet",_="https://api.devnet.solana.com",H=new u.d.Connection(_),U=function(){var e=Object(c.useMemo)((function(){return Object(L.clusterApiUrl)(G)}),[]),t=Object(c.useMemo)((function(){return[Object(I.a)(),Object(K.a)(),Object(B.a)(),Object(D.a)({network:G}),Object(F.a)({network:G})]}),[]);return Object(O.jsx)(J.a,{theme:z,children:Object(O.jsx)(A.a,{endpoint:e,children:Object(O.jsx)(M.a,{wallets:t,autoConnect:!0,children:Object(O.jsx)(j.b,{children:Object(O.jsxs)("div",{className:"backgroundPaper",children:[Object(O.jsx)(C,{}),Object(O.jsx)(w,{programId:q,connection:H,txTimeout:3e4,rpcHost:_}),Object(O.jsx)(k,{})]})})})})})},Q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,268)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};n(228);i.a.render(Object(O.jsx)(s.a.StrictMode,{children:Object(O.jsx)(U,{})}),document.getElementById("root")),Q()},90:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return b}));var r=n(3),a=n(1),c=n.n(a),s=n(24),o=(n(88),n(155)),i=(n(156),new s.d.PublicKey("BwwdesmeES3kJRxNJduM9rE6DfojzEC6DwQJveWqEW5s")),u=function(){var e=Object(r.a)(c.a.mark((function e(t,n,a){var s,o,i,u,l=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=l.length>3&&void 0!==l[3]&&l[3],o=!1,i={slot:0,confirmations:0,err:null},u=0,e.next=6,new Promise(function(){var e=Object(r.a)(c.a.mark((function e(u,l){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout((function(){o||(o=!0,console.log("Rejecting for timeout..."),l({timeout:!0}))}),n);case 1:if(o||!s){e.next=7;break}return Object(r.a)(c.a.mark((function e(){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.getSignatureStatuses([t]);case 3:n=e.sent,i=n&&n.value[0],o||(i?i.err?(console.log("REST error for",t,i),o=!0,l(i.err)):i.confirmations?(console.log("REST confirmation for",t,i),o=!0,u(i)):console.log("REST no confirmations for",t,i):console.log("REST null result for",t,i)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),o||console.log("REST connection error: txid",t,e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))(),e.next=5,p(2e3);case 5:e.next=1;break;case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 6:return i=e.sent,a._signatureSubscriptions[u]&&a.removeSignatureListener(u),o=!0,console.log("Returning status",i),e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),l=function(){var e=Object(r.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.d.Keypair.generate(),t.id,[n],e.next=5,t.program.account.tweet.all();case 5:return r=e.sent,console.log(r),e.abrupt("return",r.length);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(r.a)(c.a.mark((function e(t,n,r){var a,o,u,l,f,b;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new s.b(r,t,{preflightCommitment:"recent"}),console.log("Nandi : "+n),e.next=4,s.a.fetchIdl(i,a);case 4:return o=e.sent,u=new s.a(o,n,a),l=new s.d.PublicKey("6pin1rik2Ny7VSmAAAdstnEicfNmhWGSezAhRZwUQP8k"),e.next=9,u.account.tweet.fetch(l);case 9:return f=e.sent,b=f.numberOfTweetsPosted,console.log("Hi hi"),e.abrupt("return",{id:n,program:u,state:{numberOfTweetsPosted:b}});case 13:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),b=function(){var e=Object(r.a)(c.a.mark((function e(t,n){var r,a,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Now I am in program-functions sendTweet function"),r=s.d.Keypair.generate(),t.id,a=[r],i=[],"Topic Tweet","Content Tweet",e.t0=i,e.next=10,t.program.instruction.sendTweet("Topic Tweet","Content Tweet",{accounts:{tweet:r.publicKey,author:n,systemProgram:s.d.SystemProgram.programId},signers:[r]});case 10:return e.t1=e.sent,e.t0.push.call(e.t0,e.t1),e.prev=12,e.next=15,Object(o.a)(t.program.provider.connection,t.program.provider.wallet,[i],[a,[]]);case 15:return e.abrupt("return",e.sent.txs.map((function(e){return e.txid})));case 18:e.prev=18,e.t2=e.catch(12),console.log(e.t2);case 21:return e.abrupt("return",[]);case 22:case"end":return e.stop()}}),e,null,[[12,18]])})));return function(t,n){return e.apply(this,arguments)}}(),p=function(e){return new Promise((function(t){return setTimeout(t,e)}))}}).call(this,n(11).Buffer)}},[[229,1,2]]]);
//# sourceMappingURL=main.0cea2a58.chunk.js.map